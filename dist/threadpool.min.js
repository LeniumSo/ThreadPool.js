!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var o=r();for(var s in o)("object"==typeof exports?exports:e)[s]=o[s]}}(self,(()=>(()=>{"use strict";var e={d:(r,o)=>{for(var s in o)e.o(o,s)&&!e.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:o[s]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)},r={};e.d(r,{default:()=>s});var o=function(){function e(){}var r,o;return e.onWorkerMessage=function(e,r){for(var o=this,s=null,t=0;t<o._workersPool.length;t++)if(o._workersPool[t].id==e){s=o._workersPool[t];break}s&&(s.isIdle=!0,(o.isDebugging||r.isError)&&(r.isError?console.error("Worker: "+e,r):console.info("Worker: "+e,r)),r.isError?s.reject(r.errorMessage):s.resolve(r.result))},e.createWorker=function(){var e=this,r=new Blob([("("+function(){var e=this;e.onmessage=function(r){var o={isError:!1,processingMs:0,result:null,errorMessage:null},s=(new Date).getTime();try{var t=new Function("return "+r.data.processFunction)(),n=r.data.processArguments;o.result=t.apply(null,n)}catch(e){o.isError=!0,o.errorMessage=e.toString()}o.processingMs=(new Date).getTime()-s,e.postMessage(o)}}+")();").replace('"use strict";',"")]),o=(window.URL?URL:webkitURL).createObjectURL(r,{type:"application/javascript; charset=utf-8"}),s=e.guid(),t=new Worker(o);return t.onmessage=function(r){var o=r.data;e.onWorkerMessage(s,o)},{id:s,worker:t,isIdle:!0,resolve:null,reject:null}},e.createWorkersPool=function(){for(var e=this,r=0;r<e.workersPoolSize;r++)e._workersPool.push(e.createWorker())},e.setWorkersPoolSize=function(e){var r=this;r.isAvailable&&(e||(e=0),r._workersPool.forEach((function(e){e.worker.terminate()})),r.workersPoolSize=e,r._workersPool=[],r.createWorkersPool())},e.update=function(){var e=this;if(e._queue&&e._queue.length){for(var r,o=0;o<e._workersPool.length;o++)if(e._workersPool[o].isIdle){r=e._workersPool[o];break}if(r){var s=e._queue[0];e._queue.shift(),r.isIdle=!1,r.resolve=s.resolve,r.reject=s.reject,r.worker.postMessage({processFunction:s.processFunction,processArguments:s.processArguments})}}},e.run=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=this;return new Promise((function(o,t){if(s.isAvailable)s._queue.push({processFunction:e.toString(),processArguments:r,resolve:o,reject:t});else try{o(e.apply(null,r))}catch(e){t(e)}}))},e.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},r=e,e.isAvailable=!!window.Worker,e._workersPool=[],e._queue=[],e.workersPoolSize=5,e.isDebugging=!1,(o=r).isAvailable&&(o.createWorkersPool(),setInterval(o.update.bind(o),1e3)),e}();window.ThreadPool=o;const s=o;return r.default})()));